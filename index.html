<script>
  const envelope = document.getElementById('envelope');
  const letter = document.getElementById('letter');
  const toggleMusicButton = document.getElementById('toggleMusicButton');
  const musicYTPlayer = document.getElementById('musicYTPlayer');

  let isOpened = false;
  let isMusicPlaying = false;
  const ytURL = "https://www.youtube.com/embed/aMffjXYCpKU?autoplay=1&loop=1&playlist=aMffjXYCpKU";

  function openEnvelope() {
    if (!isOpened) {
      envelope.classList.add('open');
      setTimeout(() => {
        letter.style.display = 'block';
      }, 500);
      isOpened = true;
    }
  }

  function toggleMusic() {
    if (!isMusicPlaying) {
      // Start music by setting src (only after user clicks)
      musicYTPlayer.src = ytURL;
      toggleMusicButton.textContent = "Pause Music â¸ï¸";
      toggleMusicButton.classList.add("playing");
      isMusicPlaying = true;
    } else {
      // Stop music by resetting the iframe src
      musicYTPlayer.src = "";
      toggleMusicButton.textContent = "Play Music ðŸŽµ";
      toggleMusicButton.classList.remove("playing");
      isMusicPlaying = false;
    }
  }

  // Floating shapes (flowers/stars)
  const shapes = ["âœ§", "â€", "âœ¿", "ðŸ’«", "âœ¨", "ðŸŒ¸"];
  const colors = ["#f48fb1", "#ce93d8", "#b39ddb", "#ffcc80", "#80deea", "#fff176"];

  setInterval(() => {
    const shape = document.createElement("div");
    shape.className = "shape";
    shape.innerHTML = shapes[Math.floor(Math.random() * shapes.length)];
    shape.style.left = Math.random() * 100 + "vw";
    shape.style.color = colors[Math.floor(Math.random() * colors.length)];
    shape.style.fontSize = 18 + Math.random() * 10 + "px";
    shape.style.animationDuration = 4 + Math.random() * 3 + "s";
    document.body.appendChild(shape);
    setTimeout(() => shape.remove(), 8000);
  }, 700);
</script>
